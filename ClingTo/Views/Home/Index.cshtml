
@model PagedList.IPagedList<ClingTo.Models.Product>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Home Page";
}
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" /> 

<div class="jumbotron">
    <h1>ClingTo</h1>
    <p class="lead">Welcome to the #1 Site for Custom Designed Clothes and Apparel</a></p>
</div>

<div class="row">

@using (Html.BeginForm("Index", "Home", FormMethod.Get))
{
    <p>
        Find by name: @Html.TextBox("SearchString", ViewBag.CurrentFilter as string)
        <input type="submit" value="search" class="btn btn-default" /> <br />
    </p>
        }
    <p>
        Order By @Html.ActionLink("Name", "Index", new { sortOrder = ViewBag.TitleSortParam, currentFilter = ViewBag.CurrentFilter }) | @Html.ActionLink("Price", "Index", new { sortOrder = ViewBag.PriceSortParam, currentFilter = ViewBag.CurrentFilter })
    </p>
    @if(User.IsInRole("Designer"))
    {
        <p>
            <div class="btn btn-default">
                @Html.ActionLink("Add New Product", "Create", "Products")
            </div>
        </p>

    }
    <table class="table">
        <tbody>
            @foreach (var product in Model)
            {
                <div class="col-md-4 panel">
                    <div class="panel-body">
                        <img class="img-rounded" style="height: 50%; width: 50%;" src="@product.ImageUrl" />
                        <h2 class="panel-heading">@product.Name</h2>
                        <p>@product.Description</p>
                        <p>Price: @product.Price</p>
                        @if (User.IsInRole("Customer"))
                        {
                            <div class="btn btn-default">
                                @Html.ActionLink("Add To Cart", "AddToCart", "Customers", new { productUid = product.Uid }, null)
                            </div>
                        }
                        @if (User.IsInRole("Designer"))
                        {
                            <div class="btn btn-default">
                                @Html.ActionLink("Delete", "Delete", "Products", new { id = product.Id }, null)
                            </div>
                            <div class="btn btn-default">
                                @Html.ActionLink("Edit", "Edit", "Products", new { id = product.Id}, null)
                            </div>
                        }
                    </div>
                </div>
            }
            @if (Model.Count <= 0)
            {
                <div class="col-md-12">
                    <h1 class="page-header">No items</h1>
                </div>
            }
        </tbody>
        
    </table>
    <div>
        @Html.PagedListPager(Model, page => Url.Action("Index",
    new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
        
    </div>
</div>